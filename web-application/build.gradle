apply plugin: 'war'
apply plugin: 'liberty'

description = 'Conference :: Web'
dependencies {
    libertyRuntime group: 'io.openliberty', name: 'openliberty-runtime', version:'17.0.0.3'
}

buildscript {
	repositories {
		mavenLocal()
		mavenCentral()
	}
	dependencies {
		classpath "net.wasdev.wlp.gradle.plugins:liberty-gradle-plugin:2.1-SNAPSHOT"
	}
}

/*war {
    archiveName = 'ROOT.' + extension
}*/

ext {
    // Liberty server properties
    wlpServerName = 'uiServer'
    testServerHttpPort = 8080
    // testServerHttpsPort = 9445
}

liberty {
	server {
		name = wlpServerName
	}
}

gradle.taskGraph.whenReady { graph ->
	if (graph.hasTask(":web-application:libertyStart")) {
		libertyStart.doLast {
			println ("Application is running on http://localhost:${testServerHttpPort}/")
		}
	}
}